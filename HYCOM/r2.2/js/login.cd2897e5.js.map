{"version":3,"sources":["webpack:///./src/views/login/index.vue?3a84","webpack:///./src/views/login/index.vue?7432","webpack:///./src/views/login/index.vue?3341","webpack:///./src/views/login/index.vue?155e","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?0f18"],"names":["_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vue_cli_service_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vue_cli_service_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","model","loginForm","rules","loginRules","auto-complete","label-position","_v","prop","name","type","placeholder","value","callback","$$v","$set","expression","pwdType","nativeOn","keyup","$event","indexOf","_k","keyCode","key","handleLogin","on","click","showPwd","staticStyle","width","loading","preventDefault","registerPage","staticRenderFns","AV","validateUsername","rule","length","Error","validatePass","loginvue_type_script_lang_ts_Login","_Vue","Login","_this","Object","classCallCheck","username","password","required","trigger","validator","redirect","undefined","inherits","createClass","route","query","$router","push","path","_this2","$refs","validate","valid","User","logIn","trim","then","user","usr","toJSON","auth","$message","catch","vue_property_decorator","tslib_es6","immediate","loginvue_type_script_lang_ts_","views_loginvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vue_cli_service_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_1_id_45c89a3d_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vue_cli_service_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_1_id_45c89a3d_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/login.cd2897e5.js","sourcesContent":["import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"auto-complete\":\"on\",\"label-position\":\"left\"}},[_c('h3',{staticClass:\"title\"},[_vm._v(\"\\n      水工建筑物水力学计算程序\\n    \")]),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"user\"}})],1),_c('el-input',{attrs:{\"name\":\"username\",\"type\":\"text\",\"auto-complete\":\"on\",\"placeholder\":\"用户名\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('span',{staticClass:\"svg-container\"},[_c('svg-icon',{attrs:{\"name\":\"password\"}})],1),_c('el-input',{attrs:{\"type\":_vm.pwdType,\"name\":\"password\",\"auto-complete\":\"on\",\"placeholder\":\"密码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('span',{staticClass:\"show-pwd\",on:{\"click\":_vm.showPwd}},[_c('svg-icon',{attrs:{\"name\":_vm.pwdType === 'password' ? 'eye-off' : 'eye-on'}})],1)],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin($event)}}},[_vm._v(\"\\n        登陆\\n      \")])],1),_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.registerPage($event)}}},[_vm._v(\"\\n      注册\\n    \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { isValidUsername } from '@/utils/validate'\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport { UserModule } from '@/store/modules/user'\r\nimport { Route } from 'vue-router'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\nconst AV = require('leancloud-storage')\r\n\r\nconst validateUsername = (rule: any, value: string, callback: any) => {\r\n  if (value.length < 5) {\r\n    callback(new Error('用户名不能小于5位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\nconst validatePass = (rule: any, value: string, callback: any) => {\r\n  if (value.length < 5) {\r\n    callback(new Error('密码不能小于5位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\n@Component\r\nexport default class Login extends Vue {\r\n  private loginForm = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n  private loginRules = {\r\n    username: [{ required: true, trigger: 'blur', validator: validateUsername }],\r\n    password: [{ required: true, trigger: 'blur', validator: validatePass }]\r\n  };\r\n  private loading = false;\r\n  private pwdType = 'password';\r\n  private redirect: string | undefined = undefined;\r\n\r\n  @Watch('$route', { immediate: true })\r\n  private OnRouteChange(route: Route) {\r\n    // TODO: remove the \"as string\" hack after v4 release for vue-router\r\n    // See https://github.com/vuejs/vue-router/pull/2050 for details\r\n    this.redirect = route.query && route.query.redirect as string\r\n  }\r\n\r\n  private showPwd() {\r\n    if (this.pwdType === 'password') {\r\n      this.pwdType = ''\r\n    } else {\r\n      this.pwdType = 'password'\r\n    }\r\n  }\r\n\r\n  private registerPage() {\r\n    this.$router.push({ path: '/register' })\r\n  }\r\n\r\n  private handleLogin() {\r\n    (this.$refs.loginForm as ElForm).validate((valid: boolean) => {\r\n      if (valid) {\r\n        this.loading = true\r\n        AV.User.logIn(this.loginForm.username.trim(), this.loginForm.password).then((user:any) => {\n          const usr = user.toJSON()\r\n\r\n          if (usr.auth == 'S') {\r\n            setToken('admin-token')\r\n          } else {\r\n            setToken('developer-token')\r\n          }\r\n\r\n          this.$message('欢迎用户 ' + usr.username + ' 使用HYCOM2.0！')\r\n          this.loading = false\r\n          this.$router.push({ path: this.redirect || '/' })\r\n        }).catch(() => {\r\n          this.$message('账号不匹配')\r\n          this.loading = false\r\n        })\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=45c89a3d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=45c89a3d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45c89a3d\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=45c89a3d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=45c89a3d&lang=scss&scoped=true&\""],"sourceRoot":""}